<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construction Estimate Calculator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { Calculator, Plus, Trash2, Download, FileText, Settings } = lucide;

        const ConstructionEstimateCalculator = () => {
            const [trades, setTrades] = useState({
                'Engineering Services': false,
                'Concrete & Structural Systems': false,
                'Electrical': false,
                'HVAC/Plumbing/Controls': false,
                'Fire Suppression & Life Safety': false,
                'Demolition': false,
                'Flooring': false,
                'Inspections/Services': false,
                'Building Envelope': false,
                'Interior Finishes': false,
                'Millwork & Casework': false,
                'Landscaping & Exterior Improvements': false,
                'Specialty Equipment': false,
                'Miscellaneous / Other': false
            });

            const [laborRates, setLaborRates] = useState({
                'Project Manager': 150,
                'Superintendent': 100,
                'General Foreman': 95,
                'Foreman': 90,
                'Journeyman': 85,
                'Apprentice': 60,
                'Other': 0
            });

            const [stateData] = useState({
                'California': { salesTax: 7.25, wagePremium: 1.2 },
                'Texas': { salesTax: 6.25, wagePremium: 0.9 },
                'New York': { salesTax: 8.0, wagePremium: 1.15 },
                'Florida': { salesTax: 6.0, wagePremium: 0.95 },
                'Illinois': { salesTax: 6.25, wagePremium: 1.1 },
                'Nevada': { salesTax: 6.85, wagePremium: 1.05 },
                'Arizona': { salesTax: 5.6, wagePremium: 0.95 },
                'Colorado': { salesTax: 2.9, wagePremium: 1.0 },
                'Washington': { salesTax: 6.5, wagePremium: 1.1 },
                'Oregon': { salesTax: 0, wagePremium: 1.05 }
            });

            const projectTypes = ['Residential', 'Commercial', 'Industrial', 'Infrastructure'];

            const [estimateItems, setEstimateItems] = useState([
                {
                    id: 1,
                    taskName: 'GENERAL REQUIREMENTS',
                    description: 'Project management and coordination',
                    overtime: 1,
                    skillLevel: 'Foreman',
                    hourlyRate: 90,
                    hours: 5,
                    laborTotal: 450,
                    materialQty: 0,
                    materialRate: 0,
                    materialTotal: 0,
                    travel: 0,
                    equipment: 0,
                    fixed: 0,
                    subcontractor: 0,
                    otherTotal: 0,
                    subtotal: 450,
                    allowances: 0,
                    markupPercent: 0,
                    markupAmount: 0,
                    estimatedTotal: 450,
                    allowanceTotal: 0,
                    total: 450
                }
            ]);

            const [projectSettings, setProjectSettings] = useState({
                projectName: 'Commercial Construction Project',
                projectLocation: '',
                projectType: 'Commercial',
                profitMargin: 15,
                salesTax: 8.25,
                miscPercent: 5
            });

            const [showSetupWizard, setShowSetupWizard] = useState(true);
            const [setupStep, setSetupStep] = useState(1);

            const updateLaborRate = (role, rate) => {
                setLaborRates(prev => ({ ...prev, [role]: parseFloat(rate) || 0 }));
            };

            const handleStateChange = (state) => {
                if (stateData[state]) {
                    setProjectSettings(prev => ({
                        ...prev,
                        projectLocation: state,
                        salesTax: stateData[state].salesTax
                    }));
                    
                    const premium = stateData[state].wagePremium;
                    const baseRates = {
                        'Project Manager': 150,
                        'Superintendent': 100,
                        'General Foreman': 95,
                        'Foreman': 90,
                        'Journeyman': 85,
                        'Apprentice': 60,
                        'Other': 0
                    };
                    
                    const adjustedRates = {};
                    Object.entries(baseRates).forEach(([role, rate]) => {
                        adjustedRates[role] = Math.round(rate * premium);
                    });
                    
                    setLaborRates(adjustedRates);
                }
            };

            const completeSetup = () => {
                setShowSetupWizard(false);
            };

            const resetSetup = () => {
                setShowSetupWizard(true);
                setSetupStep(1);
            };

            const addEstimateItem = () => {
                const newId = Math.max(...estimateItems.map(item => item.id)) + 1;
                const newItem = {
                    id: newId,
                    taskName: '',
                    description: '',
                    overtime: 1,
                    skillLevel: 'Journeyman',
                    hourlyRate: 85,
                    hours: 0,
                    laborTotal: 0,
                    materialQty: 0,
                    materialRate: 0,
                    materialTotal: 0,
                    travel: 0,
                    equipment: 0,
                    fixed: 0,
                    subcontractor: 0,
                    otherTotal: 0,
                    subtotal: 0,
                    allowances: 0,
                    markupPercent: 0,
                    markupAmount: 0,
                    estimatedTotal: 0,
                    allowanceTotal: 0,
                    total: 0
                };
                setEstimateItems([...estimateItems, newItem]);
            };

            const removeEstimateItem = (id) => {
                setEstimateItems(estimateItems.filter(item => item.id !== id));
            };

            const updateEstimateItem = (id, field, value) => {
                setEstimateItems(items => items.map(item => {
                    if (item.id === id) {
                        const updatedItem = { ...item, [field]: value };
                        
                        if (field === 'skillLevel') {
                            updatedItem.hourlyRate = laborRates[value] || 0;
                        }
                        
                        const hours = parseFloat(updatedItem.hours) || 0;
                        const hourlyRate = parseFloat(updatedItem.hourlyRate) || 0;
                        const overtime = parseFloat(updatedItem.overtime) || 1;
                        
                        updatedItem.laborTotal = hours * hourlyRate * overtime;
                        
                        const materialQty = parseFloat(updatedItem.materialQty) || 0;
                        const materialRate = parseFloat(updatedItem.materialRate) || 0;
                        updatedItem.materialTotal = materialQty * materialRate;
                        
                        const travel = parseFloat(updatedItem.travel) || 0;
                        const equipment = parseFloat(updatedItem.equipment) || 0;
                        const fixed = parseFloat(updatedItem.fixed) || 0;
                        const subcontractor = parseFloat(updatedItem.subcontractor) || 0;
                        
                        updatedItem.otherTotal = travel + equipment + fixed + subcontractor;
                        updatedItem.subtotal = updatedItem.laborTotal + updatedItem.materialTotal + updatedItem.otherTotal;
                        
                        const markupPercent = parseFloat(updatedItem.markupPercent) || 0;
                        updatedItem.markupAmount = updatedItem.subtotal * (markupPercent / 100);
                        updatedItem.estimatedTotal = updatedItem.subtotal + updatedItem.markupAmount;
                        
                        const allowances = parseFloat(updatedItem.allowances) || 0;
                        updatedItem.allowanceTotal = allowances;
                        updatedItem.total = updatedItem.estimatedTotal + updatedItem.allowanceTotal;
                        
                        return updatedItem;
                    }
                    return item;
                }));
            };

            const calculateTotals = () => {
                const totalProjectCost = estimateItems.reduce((sum, item) => sum + item.total, 0);
                const totalMiscCost = totalProjectCost * (projectSettings.miscPercent / 100);
                const subtotalWithMisc = totalProjectCost + totalMiscCost;
                const profitAmount = subtotalWithMisc * (projectSettings.profitMargin / 100);
                const subtotalWithProfit = subtotalWithMisc + profitAmount;
                const salesTaxAmount = subtotalWithProfit * (projectSettings.salesTax / 100);
                const grandTotal = subtotalWithProfit + salesTaxAmount;
                
                return {
                    totalProjectCost,
                    totalMiscCost,
                    totalMarkup: estimateItems.reduce((sum, item) => sum + item.markupAmount, 0),
                    profitAmount,
                    salesTaxAmount,
                    grandTotal
                };
            };

            const totals = calculateTotals();

            const exportEstimate = () => {
                const estimate = {
                    projectName: projectSettings.projectName,
                    date: new Date().toLocaleDateString(),
                    trades,
                    items: estimateItems,
                    settings: projectSettings,
                    totals
                };
                
                const dataStr = JSON.stringify(estimate, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `estimate_${projectSettings.projectName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                URL.revokeObjectURL(url);
            };

            const generateReport = () => {
                const selectedTrades = Object.entries(trades)
                    .filter(([trade, selected]) => selected)
                    .map(([trade]) => trade);

                const reportData = `
CONSTRUCTION ESTIMATE REPORT
============================

Project: ${projectSettings.projectName}
Date: ${new Date().toLocaleDateString()}
Location: ${projectSettings.projectLocation || 'Not specified'}
Type: ${projectSettings.projectType}

TRADES/DISCIPLINES REQUIRED:
${selectedTrades.length > 0 ? selectedTrades.map(trade => `• ${trade}`).join('\n') : 'No trades selected'}

ESTIMATE LINE ITEMS:
${estimateItems.map(item => `
${item.taskName}
Description: ${item.description}
Labor: ${item.hours} hrs × $${item.hourlyRate}/hr × ${item.overtime} = $${item.laborTotal.toLocaleString()}
Materials: ${item.materialQty} × $${item.materialRate} = $${item.materialTotal.toLocaleString()}
Other Costs: $${item.otherTotal.toLocaleString()}
Markup (${item.markupPercent}%): $${item.markupAmount.toLocaleString()}
Total: $${item.total.toLocaleString()}
`).join('\n')}

FINANCIAL SUMMARY:
================
Project Subtotal: $${totals.totalProjectCost.toLocaleString()}
Miscellaneous (${projectSettings.miscPercent}%): $${totals.totalMiscCost.toLocaleString()}
Profit Margin (${projectSettings.profitMargin}%): $${totals.profitAmount.toLocaleString()}
Sales Tax (${projectSettings.salesTax}%): $${totals.salesTaxAmount.toLocaleString()}

GRAND TOTAL: $${totals.grandTotal.toLocaleString()}
                `.trim();

                const dataBlob = new Blob([reportData], { type: 'text/plain' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `estimate_report_${projectSettings.projectName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.txt`;
                link.click();
                URL.revokeObjectURL(url);
            };

            // Setup Wizard Component
            const SetupWizard = () => (
                React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 flex items-center justify-center" },
                    React.createElement('div', { className: "bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full" },
                        React.createElement('div', { className: "text-center mb-8" },
                            React.createElement('div', { className: "bg-blue-600 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center" },
                                React.createElement(Calculator, { className: "text-white w-8 h-8" })
                            ),
                            React.createElement('h1', { className: "text-3xl font-bold text-gray-900 mb-2" }, "Project Setup"),
                            React.createElement('p', { className: "text-gray-600" }, "Let's configure your estimate for accuracy")
                        ),

                        React.createElement('div', { className: "mb-6" },
                            React.createElement('div', { className: "flex justify-between items-center mb-4" },
                                [1, 2, 3].map((step) => (
                                    React.createElement('div', { key: step, className: `flex items-center ${step < 3 ? 'flex-1' : ''}` },
                                        React.createElement('div', { 
                                            className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${
                                                setupStep >= step ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-600'
                                            }`
                                        }, step),
                                        step < 3 && React.createElement('div', { className: `flex-1 h-1 mx-2 ${setupStep > step ? 'bg-blue-600' : 'bg-gray-200'}` })
                                    )
                                ))
                            )
                        ),

                        setupStep === 1 && React.createElement('div', { className: "space-y-6" },
                            React.createElement('h2', { className: "text-xl font-semibold mb-4" }, "Project Information"),
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Project Name"),
                                React.createElement('input', {
                                    type: "text",
                                    value: projectSettings.projectName,
                                    onChange: (e) => setProjectSettings(prev => ({ ...prev, projectName: e.target.value })),
                                    className: "w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                    placeholder: "Enter project name"
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Project Type"),
                                React.createElement('select', {
                                    value: projectSettings.projectType,
                                    onChange: (e) => setProjectSettings(prev => ({ ...prev, projectType: e.target.value })),
                                    className: "w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                },
                                    projectTypes.map(type => (
                                        React.createElement('option', { key: type, value: type }, type)
                                    ))
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "State/Location"),
                                React.createElement('select', {
                                    value: projectSettings.projectLocation,
                                    onChange: (e) => handleStateChange(e.target.value),
                                    className: "w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                },
                                    React.createElement('option', { value: "" }, "Select State"),
                                    Object.keys(stateData).map(state => (
                                        React.createElement('option', { key: state, value: state }, state)
                                    ))
                                )
                            )
                        ),

                        setupStep === 2 && React.createElement('div', { className: "space-y-6" },
                            React.createElement('h2', { className: "text-xl font-semibold mb-4" }, "Labor Rates Configuration"),
                            React.createElement('p', { className: "text-gray-600 mb-4" },
                                projectSettings.projectLocation 
                                    ? `Rates adjusted for ${projectSettings.projectLocation} (${((stateData[projectSettings.projectLocation]?.wagePremium || 1) * 100).toFixed(0)}% of base)`
                                    : 'Set your labor rates for this project'
                            ),
                            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                                Object.entries(laborRates).map(([role, rate]) => (
                                    React.createElement('div', { key: role },
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, role),
                                        React.createElement('div', { className: "relative" },
                                            React.createElement('span', { className: "absolute left-3 top-3 text-gray-500" }, "$"),
                                            React.createElement('input', {
                                                type: "number",
                                                value: rate,
                                                onChange: (e) => updateLaborRate(role, e.target.value),
                                                className: "w-full border border-gray-300 rounded-lg pl-8 pr-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                                placeholder: "0.00"
                                            }),
                                            React.createElement('span', { className: "absolute right-3 top-3 text-gray-500 text-sm" }, "/hr")
                                        )
                                    )
                                ))
                            )
                        ),

                        setupStep === 3 && React.createElement('div', { className: "space-y-6" },
                            React.createElement('h2', { className: "text-xl font-semibold mb-4" }, "Project Settings"),
                            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Profit Margin (%)"),
                                    React.createElement('input', {
                                        type: "number",
                                        step: "0.1",
                                        value: projectSettings.profitMargin,
                                        onChange: (e) => setProjectSettings(prev => ({ ...prev, profitMargin: parseFloat(e.target.value) || 0 })),
                                        className: "w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Sales Tax (%)"),
                                    React.createElement('input', {
                                        type: "number",
                                        step: "0.01",
                                        value: projectSettings.salesTax,
                                        onChange: (e) => setProjectSettings(prev => ({ ...prev, salesTax: parseFloat(e.target.value) || 0 })),
                                        className: "w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Miscellaneous (%)"),
                                    React.createElement('input', {
                                        type: "number",
                                        step: "0.1",
                                        value: projectSettings.miscPercent,
                                        onChange: (e) => setProjectSettings(prev => ({ ...prev, miscPercent: parseFloat(e.target.value) || 0 })),
                                        className: "w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    })
                                )
                            )
                        ),

                        React.createElement('div', { className: "flex justify-between mt-8" },
                            React.createElement('button', {
                                onClick: () => setSetupStep(Math.max(1, setupStep - 1)),
                                disabled: setupStep === 1,
                                className: "px-6 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                            }, "Previous"),
                            
                            setupStep < 3 
                                ? React.createElement('button', {
                                    onClick: () => setSetupStep(setupStep + 1),
                                    className: "px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                                }, "Next")
                                : React.createElement('button', {
                                    onClick: completeSetup,
                                    className: "px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700"
                                }, "Start Estimating")
                        )
                    )
                )
            );

            if (showSetupWizard) {
                return React.createElement(SetupWizard);
            }

            return (
                React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 sm:p-6" },
                    React.createElement('div', { className: "max-w-7xl mx-auto" },
                        // Header
                        React.createElement('div', { className: "bg-white rounded-xl shadow-xl p-6 mb-6 border border-gray-200" },
                            React.createElement('div', { className: "flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4" },
                                React.createElement('div', { className: "flex items-center gap-3" },
                                    React.createElement('div', { className: "bg-blue-600 p-3 rounded-lg" },
                                        React.createElement(Calculator, { className: "text-white w-8 h-8" })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('h1', { className: "text-2xl sm:text-3xl font-bold text-gray-900" }, "Construction Estimate Calculator"),
                                        React.createElement('p', { className: "text-gray-600 mt-1" }, `${projectSettings.projectName} - ${projectSettings.projectLocation || 'Location not set'}`)
                                    )
                                ),
                                React.createElement('div', { className: "flex flex-col sm:flex-row gap-2" },
                                    React.createElement('button', {
                                        onClick: resetSetup,
                                        className: "flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 shadow-lg hover:shadow-xl"
                                    },
                                        React.createElement(Settings, { className: "w-4 h-4" }),
                                        "Reconfigure"
                                    ),
                                    React.createElement('button', {
                                        onClick: generateReport,
                                        className: "flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-all duration-200 shadow-lg hover:shadow-xl"
                                    },
                                        React.createElement(FileText, { className: "w-4 h-4" }),
                                        "Generate Report"
                                    ),
                                    React.createElement('button', {
                                        onClick: exportEstimate,
                                        className: "flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl"
                                    },
                                        React.createElement(Download, { className: "w-4 h-4" }),
                                        "Export Data"
                                    )
                                )
                            )
                        ),

                        React.createElement('div', { className: "grid grid-cols-1 xl:grid-cols-4 gap-6" },
                            // Left sidebar with trades, summary, etc.
                            React.createElement('div', { className: "xl:col-span-1 space-y-6" },
                                // Executive Summary
                                React.createElement('div', { className: "bg-white rounded-xl shadow-lg p-6 border border-gray-200" },
                                    React.createElement('h3', { className: "text-lg font-semibold mb-4 text-gray-900" }, "Executive Summary"),
                                    React.createElement('div', { className: "space-y-3" },
                                        React.createElement('div', { className: "bg-blue-50 p-4 rounded-lg" },
                                            React.createElement('div', { className: "flex justify-between items-center" },
                                                React.createElement('span', { className: "font-semibold text-gray-900" }, "Grand Total:"),
                                                React.createElement('span', { className: "text-xl font-bold text-blue-600" }, `$${totals.grandTotal.toLocaleString()}`)
                                            )
                                        ),
                                        React.createElement('div', { className: "space-y-2 text-sm" },
                                            React.createElement('div', { className: "flex justify-between" },
                                                React.createElement('span', { className: "text-gray-600" }, "Project Cost:"),
                                                React.createElement('span', { className: "font-semibold" }, `$${totals.totalProjectCost.toLocaleString()}`)
                                            ),
                                            React.createElement('div', { className: "flex justify-between" },
                                                React.createElement('span', { className: "text-gray-600" }, `Profit (${projectSettings.profitMargin}%):`),
                                                React.createElement('span', { className: "font-semibold text-green-600" }, `$${totals.profitAmount.toLocaleString()}`)
                                            ),
                                            React.createElement('div', { className: "flex justify-between" },
                                                React.createElement('span', { className: "text-gray-600" }, `Sales Tax (${projectSettings.salesTax}%):`),
                                                React.createElement('span', { className: "font-semibold" }, `$${totals.salesTaxAmount.toLocaleString()}`)
                                            )
                                        )
                                    )
                                )
                            ),

                            // Main content area
                            React.createElement('div', { className: "xl:col-span-3" },
                                React.createElement('div', { className: "bg-white rounded-xl shadow-lg p-6 border border-gray-200" },
                                    React.createElement('div', { className: "flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4" },
                                        React.createElement('h3', { className: "text-xl font-semibold text-gray-900" }, "Estimate Line Items"),
                                        React.createElement('button', {
                                            onClick: addEstimateItem,
                                            className: "flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-all duration-200 shadow-lg hover:shadow-xl"
                                        },
                                            React.createElement(Plus, { className: "w-4 h-4" }),
                                            "Add Item"
                                        )
                                    ),

                                    React.createElement('div', { className: "overflow-x-auto" },
                                        React.createElement('table', { className: "w-full text-sm" },
                                            React.createElement('thead', null,
                                                React.createElement('tr', { className: "border-b-2 border-gray-200 bg-gray-50" },
                                                    React.createElement('th', { className: "text-left p-3 font-semibold text-gray-700" }, "Task"),
                                                    React.createElement('th', { className: "text-left p-3 font-semibold text-gray-700" }, "Hours"),
                                                    React.createElement('th', { className: "text-left p-3 font-semibold text-gray-700" }, "Rate"),
                                                    React.createElement('th', { className: "text-left p-3 font-semibold text-gray-700" }, "Labor"),
                                                    React.createElement('th', { className: "text-left p-3 font-semibold text-gray-700" }, "Materials"),
                                                    React.createElement('th', { className: "text-left p-3 font-semibold text-gray-700" }, "Other"),
                                                    React.createElement('th', { className: "text-left p-3 font-semibold text-gray-700" }, "Total"),
                                                    React.createElement('th', { className: "text-left p-3 font-semibold text-gray-700" }, "Actions")
                                                )
                                            ),
                                            React.createElement('tbody', null,
                                                estimateItems.map((item, index) => (
                                                    React.createElement('tr', { 
                                                        key: item.id, 
                                                        className: `border-b border-gray-100 hover:bg-blue-50 transition-colors ${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`
                                                    },
                                                        React.createElement('td', { className: "p-3" },
                                                            React.createElement('div', { className: "space-y-1" },
                                                                React.createElement('input', {
                                                                    type: "text",
                                                                    value: item.taskName,
                                                                    onChange: (e) => updateEstimateItem(item.id, 'taskName', e.target.value),
                                                                    className: "w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500",
                                                                    placeholder: "Task name"
                                                                }),
                                                                React.createElement('input', {
                                                                    type: "text",
                                                                    value: item.description,
                                                                    onChange: (e) => updateEstimateItem(item.id, 'description', e.target.value),
                                                                    className: "w-full border border-gray-300 rounded-md px-2 py-1 text-xs focus:ring-1 focus:ring-blue-500",
                                                                    placeholder: "Description"
                                                                })
                                                            )
                                                        ),
                                                        React.createElement('td', { className: "p-3" },
                                                            React.createElement('input', {
                                                                type: "number",
                                                                step: "0.1",
                                                                value: item.hours,
                                                                onChange: (e) => updateEstimateItem(item.id, 'hours', e.target.value),
                                                                className: "w-20 border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500",
                                                                placeholder: "Hours"
                                                            })
                                                        ),
                                                        React.createElement('td', { className: "p-3" },
                                                            React.createElement('div', { className: "space-y-1" },
                                                                React.createElement('select', {
                                                                    value: item.skillLevel,
                                                                    onChange: (e) => updateEstimateItem(item.id, 'skillLevel', e.target.value),
                                                                    className: "w-full border border-gray-300 rounded-md px-2 py-1 text-xs focus:ring-1 focus:ring-blue-500"
                                                                },
                                                                    Object.keys(laborRates).map(role => (
                                                                        React.createElement('option', { key: role, value: role }, role)
                                                                    ))
                                                                ),
                                                                React.createElement('input', {
                                                                    type: "number",
                                                                    value: item.hourlyRate,
                                                                    onChange: (e) => updateEstimateItem(item.id, 'hourlyRate', e.target.value),
                                                                    className: "w-full border border-gray-300 rounded-md px-2 py-1 text-xs focus:ring-1 focus:ring-blue-500",
                                                                    placeholder: "$/hr"
                                                                })
                                                            )
                                                        ),
                                                        React.createElement('td', { className: "p-3 font-semibold text-blue-600" },
                                                            `${item.laborTotal.toLocaleString()}`
                                                        ),
                                                        React.createElement('td', { className: "p-3" },
                                                            React.createElement('div', { className: "space-y-1" },
                                                                React.createElement('input', {
                                                                    type: "number",
                                                                    value: item.materialQty,
                                                                    onChange: (e) => updateEstimateItem(item.id, 'materialQty', e.target.value),
                                                                    className: "w-16 border border-gray-300 rounded-md px-1 py-1 text-xs focus:ring-1 focus:ring-blue-500",
                                                                    placeholder: "Qty"
                                                                }),
                                                                React.createElement('input', {
                                                                    type: "number",
                                                                    step: "0.01",
                                                                    value: item.materialRate,
                                                                    onChange: (e) => updateEstimateItem(item.id, 'materialRate', e.target.value),
                                                                    className: "w-16 border border-gray-300 rounded-md px-1 py-1 text-xs focus:ring-1 focus:ring-blue-500",
                                                                    placeholder: "Rate"
                                                                }),
                                                                React.createElement('div', { className: "text-xs font-semibold text-green-600" },
                                                                    `${item.materialTotal.toLocaleString()}`
                                                                )
                                                            )
                                                        ),
                                                        React.createElement('td', { className: "p-3" },
                                                            React.createElement('div', { className: "space-y-1" },
                                                                React.createElement('input', {
                                                                    type: "number",
                                                                    value: item.equipment,
                                                                    onChange: (e) => updateEstimateItem(item.id, 'equipment', e.target.value),
                                                                    className: "w-16 border border-gray-300 rounded-md px-1 py-1 text-xs focus:ring-1 focus:ring-blue-500",
                                                                    placeholder: "Equipment"
                                                                }),
                                                                React.createElement('input', {
                                                                    type: "number",
                                                                    value: item.subcontractor,
                                                                    onChange: (e) => updateEstimateItem(item.id, 'subcontractor', e.target.value),
                                                                    className: "w-16 border border-gray-300 rounded-md px-1 py-1 text-xs focus:ring-1 focus:ring-blue-500",
                                                                    placeholder: "Sub"
                                                                }),
                                                                React.createElement('div', { className: "text-xs font-semibold" },
                                                                    `${item.otherTotal.toLocaleString()}`
                                                                )
                                                            )
                                                        ),
                                                        React.createElement('td', { className: "p-3 font-bold text-lg text-blue-600" },
                                                            `${item.total.toLocaleString()}`
                                                        ),
                                                        React.createElement('td', { className: "p-3" },
                                                            React.createElement('button', {
                                                                onClick: () => removeEstimateItem(item.id),
                                                                className: "text-red-600 hover:text-red-800 hover:bg-red-50 p-2 rounded-lg transition-colors",
                                                                disabled: estimateItems.length === 1,
                                                                title: "Remove item"
                                                            },
                                                                React.createElement(Trash2, { className: "w-4 h-4" })
                                                            )
                                                        )
                                                    )
                                                ))
                                            )
                                        )
                                    ),

                                    // Totals Summary
                                    React.createElement('div', { className: "mt-8 pt-6 border-t-2 border-gray-200" },
                                        React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" },
                                            React.createElement('div', { className: "bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl border border-blue-200" },
                                                React.createElement('div', { className: "text-sm text-blue-700 font-medium" }, "Project Subtotal"),
                                                React.createElement('div', { className: "text-2xl font-bold text-blue-800 mt-1" },
                                                    `${totals.totalProjectCost.toLocaleString()}`
                                                )
                                            ),
                                            React.createElement('div', { className: "bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl border border-green-200" },
                                                React.createElement('div', { className: "text-sm text-green-700 font-medium" }, "Profit"),
                                                React.createElement('div', { className: "text-2xl font-bold text-green-800 mt-1" },
                                                    `${totals.profitAmount.toLocaleString()}`
                                                )
                                            ),
                                            React.createElement('div', { className: "bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-xl border border-yellow-200" },
                                                React.createElement('div', { className: "text-sm text-yellow-700 font-medium" }, "Sales Tax"),
                                                React.createElement('div', { className: "text-2xl font-bold text-yellow-800 mt-1" },
                                                    `${totals.salesTaxAmount.toLocaleString()}`
                                                )
                                            ),
                                            React.createElement('div', { className: "bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl border border-purple-200" },
                                                React.createElement('div', { className: "text-sm text-purple-700 font-medium" }, "Grand Total"),
                                                React.createElement('div', { className: "text-2xl font-bold text-purple-800 mt-1" },
                                                    `${totals.grandTotal.toLocaleString()}`
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(ConstructionEstimateCalculator), document.getElementById('root'));
    </script>
</body>
</html>
